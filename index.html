<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>GENESIS // SYSTEM LINK</title>

<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Rajdhani:wght@500;700&family=Share+Tech+Mono&display=swap" rel="stylesheet">

<style>
    :root {
        --c-cyan: #00f3ff;
        --c-purple: #bc13fe;
        --c-white: #e0faff;
        --c-dark: #050508;
        --bg-hud: rgba(2, 4, 8, 0.6);
    }

    body {
        margin: 0;
        overflow: hidden;
        background: var(--c-dark);
        font-family: 'Share Tech Mono', monospace;
        color: var(--c-cyan);
        user-select: none;
    }

    /* --- CAPAS FX (Scanlines y Viñeta) --- */
    .screen-layer {
        position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 10;
    }
    .scanlines {
        background: repeating-linear-gradient(
            0deg,
            rgba(0,0,0,0.1) 0px,
            rgba(0, 243, 255, 0.03) 1px,
            transparent 2px,
            transparent 4px
        );
        background-size: 100% 4px;
    }
    .vignette {
        background: radial-gradient(circle, transparent 50%, rgba(0,0,0,0.8) 120%);
    }

    /* --- HUD (Interfaz) --- */
    .hud-container {
        position: absolute; top: 0; left: 0; width: 100%; height: 100%;
        padding: 2rem; box-sizing: border-box; pointer-events: none;
        display: flex; flex-direction: column; justify-content: space-between;
        z-index: 20;
    }

    /* Header */
    .hud-top {
        display: flex; justify-content: space-between; align-items: flex-start;
        border-top: 2px solid var(--c-cyan);
        padding-top: 10px;
        background: linear-gradient(180deg, rgba(0,243,255,0.1) 0%, transparent 100%);
    }
    h1 {
        margin: 0; font-family: 'Rajdhani', sans-serif;
        font-size: 2.5rem; letter-spacing: 0.2rem;
        text-shadow: 0 0 10px var(--c-cyan);
    }
    .sub-data { font-size: 0.8rem; opacity: 0.8; line-height: 1.4; text-align: right; }
    
    /* Paneles Laterales */
    .hud-middle {
        flex-grow: 1; position: relative;
    }
    .panel {
        position: absolute; top: 50%; transform: translateY(-50%);
        width: 280px; background: var(--bg-hud);
        border: 1px solid rgba(0,243,255,0.3);
        padding: 15px;
        backdrop-filter: blur(4px);
    }
    .panel-left { left: 0; border-left: 4px solid var(--c-purple); }
    .panel-right { right: 0; border-right: 4px solid var(--c-cyan); text-align: right; }

    .data-row {
        display: flex; justify-content: space-between; margin-bottom: 6px;
        font-size: 0.9rem; border-bottom: 1px solid rgba(255,255,255,0.1);
    }
    .val { color: var(--c-white); font-weight: bold; }
    
    /* Logs Console */
    .console-box {
        margin-top: 15px; height: 80px; overflow: hidden;
        font-size: 0.75rem; color: rgba(255,255,255,0.7);
        border-left: 2px solid var(--c-purple); padding-left: 8px;
    }
    .log-line { margin-bottom: 2px; }
    .log-line::before { content: '>> '; color: var(--c-purple); }

    /* Footer */
    .hud-bottom {
        display: flex; align-items: flex-end; justify-content: space-between;
        border-bottom: 2px solid var(--c-cyan);
        padding-bottom: 10px;
    }
    .spectrum {
        display: flex; gap: 3px; height: 30px; align-items: flex-end;
    }
    .bar {
        width: 8px; background: var(--c-cyan);
        animation: equalizer 1s ease-in-out infinite alternate;
    }
    @keyframes equalizer { 0% { height: 20%; opacity: 0.5; } 100% { height: 100%; opacity: 1; box-shadow: 0 0 8px var(--c-cyan); } }

    /* Crosshair */
    .crosshair {
        position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
        width: 60px; height: 60px; pointer-events: none;
        border: 1px dashed rgba(255,255,255,0.3); border-radius: 50%;
    }
    .crosshair::before, .crosshair::after {
        content: ''; position: absolute; background: var(--c-cyan);
    }
    .crosshair::before { top: -5px; left: 50%; width: 2px; height: 10px; transform: translateX(-50%); }
    .crosshair::after { left: -5px; top: 50%; width: 10px; height: 2px; transform: translateY(-50%); }

    /* Botón Interactivo (Falso) */
    .btn-action {
        pointer-events: auto; cursor: pointer;
        background: rgba(0, 243, 255, 0.1); border: 1px solid var(--c-cyan);
        color: var(--c-cyan); padding: 5px 10px; font-family: inherit;
        transition: 0.3s; margin-top: 10px;
    }
    .btn-action:hover { background: var(--c-cyan); color: #000; box-shadow: 0 0 15px var(--c-cyan); }

</style>
</head>
<body>

<div class="screen-layer scanlines"></div>
<div class="screen-layer vignette"></div>
<div class="crosshair"></div>

<div class="hud-container">
    <div class="hud-top">
        <div>
            <h1>ORION // NEXUS</h1>
            <span style="background:var(--c-cyan); color:#000; padding:2px 5px; font-size:12px; font-weight:bold;">LIVE FEED</span>
        </div>
        <div class="sub-data">
            COORDS: 44.902.1<br>
            SPECTRAL: CLASS-A<br>
            TEMP: 4,500 K
        </div>
    </div>

    <div class="hud-middle">
        <div class="panel panel-left">
            <div style="color:var(--c-purple); margin-bottom:5px;">/// SYSTEM DIAGNOSTICS</div>
            <div class="data-row"><span>CORE STABILITY:</span> <span class="val">98.4%</span></div>
            <div class="data-row"><span>PHOTON OUTPUT:</span> <span class="val" id="outputVal">120 TW</span></div>
            <div class="data-row"><span>NET CONNECTION:</span> <span class="val">SECURE</span></div>
            
            <div class="console-box" id="sysLog">
                <div class="log-line">Initializing render engine...</div>
                <div class="log-line">Loading star charts...</div>
                <div class="log-line">Connection established.</div>
            </div>
        </div>

        <div class="panel panel-right">
            <div style="color:var(--c-cyan); margin-bottom:5px;">/// ORBITAL CONTROL</div>
            <div class="data-row"><span>TARGET:</span> <span class="val">ALPHA-9</span></div>
            <div class="data-row"><span>DISTANCE:</span> <span class="val" id="distVal">0.00 AU</span></div>
            <button class="btn-action" onclick="triggerPulse()">INITIATE SCAN</button>
            <br><br>
            <div style="font-size:10px; color:var(--c-purple);">WARNING: GRAVITATIONAL ANOMALY DETECTED.</div>
        </div>
    </div>

    <div class="hud-bottom">
        <div class="spectrum">
            <div class="bar" style="animation-duration:0.8s"></div>
            <div class="bar" style="animation-duration:1.2s; background:var(--c-purple)"></div>
            <div class="bar" style="animation-duration:0.5s"></div>
            <div class="bar" style="animation-duration:0.9s"></div>
            <div class="bar" style="animation-duration:1.1s; background:var(--c-purple)"></div>
        </div>
        <div style="font-size:12px; opacity:0.6;">SYSTEM READY_</div>
    </div>
</div>

<script type="importmap">
    {
      "imports": {
        "three": "https://unpkg.com/three@0.160.0/build/three.module.js",
        "three/addons/": "https://unpkg.com/three@0.160.0/examples/jsm/"
      }
    }
</script>

<script type="module">
    import * as THREE from "three";
    import { OrbitControls } from "three/addons/controls/OrbitControls.js";
    import { EffectComposer } from "three/addons/postprocessing/EffectComposer.js";
    import { RenderPass } from "three/addons/postprocessing/RenderPass.js";
    import { UnrealBloomPass } from "three/addons/postprocessing/UnrealBloomPass.js";

    // 1. ESCENA BASE
    const scene = new THREE.Scene();
    scene.background = new THREE.Color(0x020205); // Negro profundo espacio
    scene.fog = new THREE.FogExp2(0x020205, 0.02);

    const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
    camera.position.set(0, 2, 10);

    const renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
    renderer.setSize(window.innerWidth, window.innerHeight);
    renderer.setPixelRatio(window.devicePixelRatio);
    renderer.toneMapping = THREE.ReinhardToneMapping;
    document.body.appendChild(renderer.domElement);

    // 2. EL NÚCLEO (PLANETA DEFORMADO)
    // Usamos Icosahedron para geometría facetada sci-fi
    const geometry = new THREE.IcosahedronGeometry(2.5, 40);
    const material = new THREE.MeshStandardMaterial({
        color: 0x000000,
        roughness: 0.4,
        metalness: 0.9,
        emissive: 0x001133,
        emissiveIntensity: 0.2
    });

    // Desplazamiento de vértices para textura orgánica
    const pos = geometry.attributes.position;
    const v = new THREE.Vector3();
    for (let i = 0; i < pos.count; i++) {
        v.fromBufferAttribute(pos, i);
        const noise = Math.sin(v.x * 3) * Math.cos(v.y * 3) * Math.sin(v.z * 3);
        const scale = 1 + noise * 0.1;
        pos.setXYZ(i, v.x * scale, v.y * scale, v.z * scale);
    }
    geometry.computeVertexNormals();
    const planet = new THREE.Mesh(geometry, material);
    scene.add(planet);

    // 3. LA RED DE CONSTELACIONES (Wireframe Cage - Img 2 Ref)
    const cageGeo = new THREE.IcosahedronGeometry(3.5, 1);
    const cageMat = new THREE.MeshBasicMaterial({ 
        color: 0x00f3ff, 
        wireframe: true, 
        transparent: true, 
        opacity: 0.15 
    });
    const cage = new THREE.Mesh(cageGeo, cageMat);
    scene.add(cage);

    // 4. EL HAZ VERTICAL (The Beam - Img 1 Ref)
    const beamGeo = new THREE.CylinderGeometry(0.2, 0.2, 80, 16, 1, true);
    const beamMat = new THREE.ShaderMaterial({
        uniforms: {
            uTime: { value: 0 },
            uColor: { value: new THREE.Color(0x00f3ff) }
        },
        vertexShader: `
            varying vec2 vUv;
            void main() {
                vUv = uv;
                gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
            }
        `,
        fragmentShader: `
            uniform float uTime;
            uniform vec3 uColor;
            varying vec2 vUv;
            void main() {
                // Efecto de energía corriendo verticalmente
                float strength = abs(sin(vUv.y * 20.0 - uTime * 5.0));
                float fade = smoothstep(0.0, 0.2, vUv.y) * smoothstep(1.0, 0.8, vUv.y);
                gl_FragColor = vec4(uColor, strength * fade * 0.5);
            }
        `,
        transparent: true,
        blending: THREE.AdditiveBlending,
        depthWrite: false,
        side: THREE.DoubleSide
    });
    const beam = new THREE.Mesh(beamGeo, beamMat);
    scene.add(beam);

    // 5. NEBULOSA Y ESTRELLAS (Atmósfera)
    const particlesCount = 1500;
    const posArray = new Float32Array(particlesCount * 3);
    const colorArray = new Float32Array(particlesCount * 3);
    const c1 = new THREE.Color(0x00f3ff);
    const c2 = new THREE.Color(0xbc13fe);

    for(let i = 0; i < particlesCount * 3; i+=3) {
        // Distribución en disco/esfera
        const r = 4 + Math.random() * 15;
        const theta = Math.random() * 2 * Math.PI;
        const phi = Math.acos(2 * Math.random() - 1);
        
        posArray[i] = r * Math.sin(phi) * Math.cos(theta);
        posArray[i+1] = (r * Math.sin(phi) * Math.sin(theta)) * 0.3; // Aplanado
        posArray[i+2] = r * Math.cos(phi);

        // Mezcla de colores cyan/purple
        const color = Math.random() > 0.5 ? c1 : c2;
        colorArray[i] = color.r;
        colorArray[i+1] = color.g;
        colorArray[i+2] = color.b;
    }

    const starGeo = new THREE.BufferGeometry();
    starGeo.setAttribute('position', new THREE.BufferAttribute(posArray, 3));
    starGeo.setAttribute('color', new THREE.BufferAttribute(colorArray, 3));

    const starMat = new THREE.PointsMaterial({
        size: 0.08,
        vertexColors: true,
        transparent: true,
        opacity: 0.8,
        blending: THREE.AdditiveBlending
    });
    const starField = new THREE.Points(starGeo, starMat);
    scene.add(starField);

    // 6. ILUMINACIÓN
    const sunLight = new THREE.PointLight(0x00f3ff, 100, 50);
    sunLight.position.set(2, 2, 2);
    scene.add(sunLight);
    
    const purpleLight = new THREE.PointLight(0xbc13fe, 80, 50);
    purpleLight.position.set(-3, -3, -3);
    scene.add(purpleLight);

    const ambient = new THREE.AmbientLight(0x404040, 0.5); // Luz suave base
    scene.add(ambient);

    // 7. POST-PROCESSING (BLOOM)
    const composer = new EffectComposer(renderer);
    composer.addPass(new RenderPass(scene, camera));
    
    // El bloom da el efecto "glowing" de las imágenes
    const bloomPass = new UnrealBloomPass(new THREE.Vector2(window.innerWidth, window.innerHeight), 1.5, 0.4, 0.85);
    bloomPass.threshold = 0;
    bloomPass.strength = 2.0; // Intensidad alta para efecto neón
    bloomPass.radius = 0.5;
    composer.addPass(bloomPass);

    // 8. INTERACCIÓN Y ANIMACIÓN
    const controls = new OrbitControls(camera, renderer.domElement);
    controls.enableDamping = true;
    controls.autoRotate = true;
    controls.autoRotateSpeed = 0.5;

    // Shockwave effect
    const shockRingGeo = new THREE.RingGeometry(3, 3.2, 64);
    const shockRingMat = new THREE.MeshBasicMaterial({ color: 0xffffff, transparent: true, opacity: 0, side: THREE.DoubleSide });
    const shockRing = new THREE.Mesh(shockRingGeo, shockRingMat);
    shockRing.rotation.x = Math.PI / 2;
    scene.add(shockRing);

    let isPulsing = false;

    window.triggerPulse = () => {
        isPulsing = true;
        shockRing.scale.set(1,1,1);
        shockRing.material.opacity = 1;
        
        // Log update
        const log = document.getElementById('sysLog');
        const div = document.createElement('div');
        div.className = 'log-line';
        div.innerText = "SCANNING SECTOR " + Math.floor(Math.random()*900);
        div.style.color = "#00f3ff";
        log.prepend(div);
        
        // Flash light
        sunLight.intensity = 500;
        setTimeout(() => { sunLight.intensity = 100; }, 200);
    };

    const clock = new THREE.Clock();

    function animate() {
        requestAnimationFrame(animate);
        
        const t = clock.getElapsedTime();

        // Rotaciones
        planet.rotation.y += 0.002;
        cage.rotation.y -= 0.001;
        cage.rotation.x = Math.sin(t * 0.2) * 0.1;
        starField.rotation.y = t * 0.05;

        // Animar Beam shader
        beamMat.uniforms.uTime.value = t;

        // Animar luz para efecto "respiración"
        sunLight.intensity = 100 + Math.sin(t * 2) * 30;

        // Efecto pulso
        if(isPulsing) {
            shockRing.scale.multiplyScalar(1.05);
            shockRing.material.opacity -= 0.02;
            if(shockRing.material.opacity <= 0) isPulsing = false;
        }

        // Datos Random UI
        if(Math.random() > 0.95) {
            document.getElementById('outputVal').innerText = (100 + Math.random()*50).toFixed(0) + " TW";
            document.getElementById('distVal').innerText = (Math.random() * 10).toFixed(2) + " AU";
        }

        controls.update();
        composer.render();
    }

    animate();

    // Resize Handler
    window.addEventListener('resize', () => {
        camera.aspect = window.innerWidth / window.innerHeight;
        camera.updateProjectionMatrix();
        renderer.setSize(window.innerWidth, window.innerHeight);
        composer.setSize(window.innerWidth, window.innerHeight);
    });

</script>
</body>
</html>
